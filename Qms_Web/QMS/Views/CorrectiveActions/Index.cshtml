@model IEnumerable<QMS.ViewModels.CorrectiveActionListViewModel>

    <h2 class="mt-3 mb-4 text-center">@ViewData["CA_INDEX_PAGE_TITLE"]</h2>

    <p class="mb-1 text-primary font-italic mt-4">Click on column name to sort column:</p>
    <table class="table table-bordered table-striped table-hover table-sm mt-0">
        <thead class="thead-dark">
            <tr style="height: 50px;">
                <th class="text-center border align-middle">
                    <a class="text-light font-weight-normal" asp-controller="CorrectiveActions" asp-action="Index"
                       asp-route-UseCase="@ViewData["UseCase"]" asp-route-SortOrder="@ViewData["IdSortParam"]">@Html.DisplayNameFor(model => model.CorrectiveActionId)</a>
                </th>
                <th class="text-center border align-middle">
                    <a class="text-light font-weight-normal" asp-controller="CorrectiveActions" asp-action="Index"
                       asp-route-UseCase="@ViewData["UseCase"]" asp-route-SortOrder="@ViewData["emplIdSortParam"]">@Html.DisplayNameFor(model => model.EmployeeId)</a>
                </th>
                <th class="text-center border align-middle">
                    <a class="text-light font-weight-normal" asp-controller="CorrectiveActions" asp-action="Index"
                       asp-route-UseCase="@ViewData["UseCase"]" asp-route-SortOrder="@ViewData["emplNameSortParam"]">@Html.DisplayNameFor(model => model.EmployeeName)</a>
                </th>
                <th class="text-center border align-middle">
                    <a class="text-light font-weight-normal" asp-controller="CorrectiveActions" asp-action="Index"
                       asp-route-UseCase="@ViewData["UseCase"]" asp-route-SortOrder="@ViewData["requestTypeSortParam"]">@Html.DisplayNameFor(model => model.ActionTypeLabel)</a>
                </th>
                <th class="text-center border align-middle">
                    <a class="text-light font-weight-normal" asp-controller="CorrectiveActions" asp-action="Index"
                       asp-route-UseCase="@ViewData["UseCase"]" asp-route-SortOrder="@ViewData["noaSortParam"]">@Html.DisplayNameFor(model => model.NatureOfActionLabel)</a>
                </th>
                <th class="text-center border align-middle">
                    <a class="text-light font-weight-normal" asp-controller="CorrectiveActions" asp-action="Index"
                       asp-route-UseCase="@ViewData["UseCase"]" asp-route-SortOrder="@ViewData["orgSortParam"]">@Html.DisplayNameFor(model => model.AssignedToOrgLabel)</a>
                </th>
                <th class="text-center border align-middle">
                    <a class="text-light font-weight-normal" asp-controller="CorrectiveActions" asp-action="Index"
                       asp-route-UseCase="@ViewData["UseCase"]" asp-route-SortOrder="@ViewData["personSortParam"]">@Html.DisplayNameFor(model => model.AssignedToUserName)</a>
                </th>
                <th class="text-center border align-middle">
                    <a class="text-light font-weight-normal" asp-controller="CorrectiveActions" asp-action="Index"
                       asp-route-UseCase="@ViewData["UseCase"]" asp-route-SortOrder="@ViewData["statusSortParam"]">@Html.DisplayNameFor(model => model.StatusLabel)</a>
                </th>
                <th class="text-center border align-middle">
                    <a class="text-light font-weight-normal" asp-controller="CorrectiveActions" asp-action="Index"
                       asp-route-UseCase="@ViewData["UseCase"]" asp-route-SortOrder="@ViewData["prioritySortParam"]">@Html.DisplayNameFor(model => model.Priority)</a>
                </th>
                <th class="text-center border align-middle">
                    <a class="text-light font-weight-normal" asp-controller="CorrectiveActions" asp-action="Index"
                       asp-route-UseCase="@ViewData["UseCase"]" asp-route-SortOrder="@ViewData["submittedBySortParam"]">@Html.DisplayNameFor(model => model.CreatedByUserName)</a>
                </th>
                <th class="text-center border align-middle">
                    <a class="text-light font-weight-normal" asp-controller="CorrectiveActions" asp-action="Index"
                       asp-route-UseCase="@ViewData["UseCase"]" asp-route-SortOrder="@ViewData["dateSubmittedSortParam"]">@Html.DisplayNameFor(model => model.CreatedAt)</a>
                </th>
                <th class="text-center border align-middle">
                    <a class="text-light font-weight-normal" asp-controller="CorrectiveActions" asp-action="Index"
                       asp-route-UseCase="@ViewData["UseCase"]" asp-route-SortOrder="@ViewData["daysOldSortParam"]">@Html.DisplayNameFor(model => model.DaysSinceCreated)</a>
                </th>
            </tr>
        </thead>
        <tbody>
            @foreach (var item in Model)
            {
            <tr>
                <td>
                    <a asp-area="" asp-controller="CorrectiveActions" asp-action="Edit" asp-route-id="@item.CorrectiveActionId" asp-route-UseCase="@item.UseCase">
                        @Html.DisplayFor(modelItem => item.CorrectiveActionId)
                    </a>
                </td>
                <td>@Html.DisplayFor(modelItem => item.EmployeeId)</td>
                <td>@Html.DisplayFor(modelItem => item.EmployeeName)</td>
                <td>@Html.DisplayFor(modelItem => item.ActionTypeLabel)</td>
                <td>@Html.DisplayFor(modelItem => item.NatureOfActionLabel)</td>
                <td>@Html.DisplayFor(modelItem => item.AssignedToOrgLabel)</td>
                <td>@Html.DisplayFor(modelItem => item.AssignedToUserName)</td>
                <td>@Html.DisplayFor(modelItem => item.StatusLabel)</td>
                <td>@Html.DisplayFor(modelItem => item.Priority)</td>
                <td>@Html.DisplayFor(modelItem => item.CreatedByUserName)</td>
                <td>@Html.DisplayFor(modelItem => item.CreatedAt)</td>
                <td>@Html.DisplayFor(modelItem => item.DaysSinceCreated)</td>
            </tr>
           }
        </tbody>
    </table>

    @section Scripts {
        <script>
            window.addEventListener("load", function () {
                let mainContainer = document.getElementById("main-container");
                if (mainContainer) {
                    mainContainer.classList.remove("container");
                    mainContainer.classList.add("container-fluid");
                    //mainContainer.classList.add("w-75");
                    mainContainer.style.width = "90%";
                }
            });
        </script>
    }
